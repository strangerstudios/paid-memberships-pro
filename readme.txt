=== Paid Memberships Pro ===
Contributors: strangerstudios
Tags: membership, memberships, member, members, ecommerce, e-commerce, paypal, stripe, braintree, authorize.net, payflow, restrict access, restrict content, directory
Requires at least: 4
Tested up to: 5.3.2
Stable tag: 2.2.6

Get Paid with Paid Memberships Pro: The most complete member management and membership subscriptions plugin for your WordPress site.

== Description ==
= The most complete member management and membership subscriptions plugin for WordPress =
Paid Memberships Pro is designed for premium content sites, clubs/associations, subscription products, newsletters and more! The plugin adds a new revenue source to your site and is flexible enough to fit the needs of almost all online and offline businesses.

[youtube https://www.youtube.com/watch?v=-M3aoEHvGZ4]

= Simple to install and get running â€“ deeply customizable! =
* Unlimited Levels with Flexible Membership Pricing
* 6 Popular Payment Gateways Included
* Extensive Options for Content Restriction
* Customizable Reports and Member Dashboards
* Over 60 Premium Add Ons to Extend and Customize
* 100% GPL and Integrated with Third Party Services

= Sites running Paid Memberships Pro use it to: =
* Manage professional organizations with thousands of members.
* Get paid for e-learning and digital courseware.
* Accept recurring payment for content, podcasts, video, and more.
* Create private social communities for unique interest groups.
* Develop robust directory or listings sites by topic or region.
* Offer product subscriptions or members-only product discounts.

= Choose from Top Payment Gateways. =
All of our payment gateways are included in the plugin. Choose from PayPal, Stripe, Authorize.net, Braintree or 2Checkout.

= Infinitely Configurable, Unlimited Membership Levels. =
Set up the membership levels that best fit your business, whether they are one-time payments or recurring subscriptions (annual, monthly, weekly, daily). You can even offer custom trial periods including Free Trials, Custom-length Trial, or 'Introductory' Pricing trials.

Membership levels provide restricted access to members-only content (including pages, posts, categories, videos, forums, downloads, support, single "a la carte" page access, and more).

= Control the user-experience from start to finish. =
Your members can update their billing information or cancel their account directly on your site. Any active subscription will be cancelled at the payment gateway for you.

= Add Ons to help you do more. =
Extend the features of your membership site or integrate with third-party services through our library of over 60 add ons. Our library of free or paid Add Ons allow you to:

* Integrate members with email marketing platforms including Mailchimp, Constant Contact, AWeber and GetResponse.
* Restrict access to forums, groups, courses, downloads, events, and product.
* Allow affiliates to get credit for membership checkouts.

[View the Add-Ons](http://www.paidmembershipspro.com/add-ons/)

= Paid Memberships Pro is a free membership plugin for WordPress =
Our plugin is 100% GPL and available from the WordPress repository or on our site at http://www.paidmembershipspro.com. The full version of the plugin is offered with no restrictions or additional licenses required. Developers should get involved at [our GitHub page](https://github.com/strangerstudios/paid-memberships-pro/).

== Installation ==

= Download, Install and Activate! =
1. Go to Plugins > Add New to install Paid Memberships Pro, or
2. Download the latest version of the plugin.
3. Unzip the downloaded file to your computer.
4. Upload the /paid-memberships-pro/ directory to the /wp-content/plugins/ directory of your site.
5. Activate the plugin through the 'Plugins' menu in WordPress.

= Complete the Initial Plugin Setup =
Go to Memberships in the WordPress admin for a step-by-step initial setup, including:

1. Membership Levels: Add one or more Membership Levels
2. Page Settings: Generate or assign the Pages
3. Payment Gateway: Select and configure your Gateway and SSL
4. Email: Customize Email Settings
5. Advanced Settings: Update non-member messages, optionally show excerpts or filter content.

= More Installation and Setup Documentation =
* [Installation Video](http://www.paidmembershipspro.com/documentation/initial-plugin-setup/tutorial-video/)
* [Installation Docs](http://www.paidmembershipspro.com/documentation/initial-plugin-setup/)
* [Membership Levels](https://www.paidmembershipspro.com/documentation/membership-levels/)
* [Payment Gateways](https://www.paidmembershipspro.com/gateway/)
* [Add Ons](https://www.paidmembershipspro.com/add-ons/)

== Frequently Asked Questions ==

= I need help installing, configuring, or customizing the plugin. =
Please visit [our support site at http://www.paidmembershipspro.com](http://www.paidmembershipspro.com) for more documentation and our support forums.

= I found a bug in the plugin. =
Please post it in the [WordPress support forum](http://wordpress.org/tags/paid-memberships-pro?forum_id=10) and we'll fix it right away. Thanks for helping.

= My site is broken or blank or not letting me log in after activating Paid Memberships Pro =
This is typically caused by a conflict with another plugin that is trying to redirect around the login/register pages or trying to redirect from HTTP to HTTPS, etc.

To regain access to your site, FTP to your site and rename the wp-content/plugins/paid-memberships-pro folder to wp-content/plugins/paid-memberhsips-pro-d (or anything different). Now WP will not be able to find PMPro, and you can gain access to /wp-admin/ again. From there, visit the plugins page to fully deactivate Paid Memberships Pro. (You'll want to rename the folder back to paid-memberhsips-pro again.)

Long term, you will need to find and fix the conflict. We can usually do this for you very quickly if you sign up for support at http://www.paidmembershipspro.com/pricing/ and send us your WP admin and FTP credentials.

= Does PMPro Support Multisite/Network Installs? =
"Supporting multisite" means different things to different people.

Out of the box PMPro will basically act as a stand alone plugin for each site. Each site has its own list of membership levels, members, payment settings, etc.

Our [Network/Multisite Add On](http://www.paidmembershipspro.com/add-ons/plus-add-ons/pmpro-network-multisite-membership/) allows members to choose a site name and title at checkout and will set up a network site at checkout.

Our [Network Membership Add On](http://www.paidmembershipspro.com/add-ons/plus-add-ons/pmpro-network-membership/) allows you to manage memberships at the 'Main' Network site and provide or restrict access on other Network Subsites.

If you would like more help using PMPro on a network install, sign up for support at http://www.paidmembershipspro.com.

= Does PMPro Support X? =
Not sure? You can find out by doing a bit a research.

1. [Check our compatibility page](http://www.paidmembershipspro.com/compatibility/).
2. [Check our add ons](http://www.paidmembershipspro.com/add-ons/).
3. [Do a search on our site](http://www.paidmembershipspro.com/).
4. [Ask in the forums here](http://wordpress.org/tags/paid-memberships-pro?forum_id=10).

== Screenshots ==

= Memberships Admin Pages =
1. Set up the membership levels that best fit your business, whether they are Free, Paid, or Subscriptions (Annual, Monthly, Weekly, Daily). Offer Custom Trial Periods (Free Trial, Custom-length Trial, 'Introductory' Pricing)
2. Easy to use Membership Access Settings by Page, Post, or Category. Shortcodes to display restricted content inline. Developer-friendly hooks to restrict access any way you need.
3. Members are WordPress Users. PMPro provides a unique interface to view, filter and search Members or export your Members List.
4. Offer Membership Discounts with specific price rules (restricted by level, unique pricing for each level, # of uses, expiration date.)
5. Filterable Sales Revenue Reports (reports also included for Visits, Views, Logins, Signups, Cancellations, and other Membership Stats).
6. Advanced settings for updating non-member messages, optionally show excerpts or filter content, use reCAPTCHA, and a Terms of Service checkbox.

= Frontend Membership Page =
7. Membership levels selection page, filter the shortcode with additional attributes using add ons or the Memberlite theme.
8. Membership Account page, display all sections or show specific sections using shortcode attributes.

[View All Screenshots](http://www.paidmembershipspro.com/features/screenshots/)

== Changelog ==
= 2.2.6 - 2020-02-20
* SECURITY: Escaping the post title shown in the Terms of Service section of the checkout page.
* BUG FIX: Fixed issue where the CVV/Security Code was not being passed to Authorize.net when using that gateway.
* BUG FIX: Fixed issues with the update billing page when using Stripe.
* BUG FIX: Fixed issues with the update billing page when using the MMPU Add On.
* BUG FIX: Fixed issue where password fields would disappear when the checkout form was submitted. This behavior was required to address bugs in older versions of iOS that shouldn't be in use any more.
* BUG FIX: No longer sending an extra cancel request to the PayPal API when processing a cancel for a PayPal Express subscription through the IPN handler.
* BUG FIX: The currency option is no longer hidden when using the check gateway.
* BUG FIX: Fixed the comparisons in the pmpro_check_plugin_version function and related notification checks.
* BUG FIX: Avoiding warnings in the sendAdminChangeEmail method if the user doesn't have a level.
* BUG FIX: Fixed some cases where the Members List CSV export wouldn't match the members shown in the table/search.
* BUG FIX: Fixed issue where the Members List may show the wrong count or enddate.
* BUG FIX/ENHANCEMENT: Added support for Elementor. Filtering content later so the builder's filters can run first. Also added the ability to choose which membership levels an element should be visible for.
* BUG FIX/ENHANCEMENT: Fixed the confirmation page formatting when paying by check. Added a div with class "pmpro_payment_instructions" around the payment instructions shown on the confirmation and invoice pages.
* BUG FIX/ENHANCEMENT: Added an Oxford Comma to the the pmpro_implodeToEnglish() function.
* BUG FIX/ENHANCEMENT: Moved the Japanese Yen symbol to the left of the total instead of the right.
* BUG FIX/ENHANCEMENT: Added the pmpro_checkout_login_redirect filter, which filters the url_redirect parameter of the login link on the checkout page. This is used by some Add Ons to make sure you are returned to the checkout page properly after logging in through that link.
* ENHANCEMENT: Added the Ghanian Cedi currency.
* ENHANCEMENT: Added the pmpro_are_levels_recurring() function to help with MMPU.
* ENHANCEMENT: Improved the look and source of the CVV popup.

= 2.2.5 - 2020-01-05 =
* BUG FIX: Once again loading JavaScript on the update billing page when using Braintree.
* BUG FIX: Loading Braintree JavaScript at checkout for free levels to support the variable pricing and donation add ons.
* BUG FIX: Fixed issues with PayPal orders when using the pmpro_paypal_level_description filter.
* BUG FIX/ENHANCEMENT: Responsive update for smaller device viewports for the Membership Levels table in the dashboard.
* ENHANCEMENT: Added filters: pmpro_is_level_free, pmpro_is_level_trial, and pmpro_is_level_expiring.

= 2.2.4 - 2019-12-20 =
* BUG FIX: Fixed issue with the update billing page when using the Stripe gateway.

= 2.2.3 - 2019-12-09 =
* BUG FIX: Fixed issue where Stripe checkout failed for free levels that had their price adjusted through the donations or variable pricing add ons.
* BUG FIX: Fixed undeclared variables warnings in the members list.
* BUG FIX: Fixed the edit user links in the email sent to admins when cancelations have errors.
* REFACTOR: Removed some unused code from the members list class.

= 2.2.2 - 2019-11-29 =
* BUG FIX: Fixed issue with member search.
* BUG FIX: Fixed issue with custom columns in the members list. (Thanks, Tim Sparks)

= 2.2.1 - 2019-11-27 =
* BUG FIX: Fixed performance issues with the new WP List Table implementation of the members list.
* BUG FIX: Fixed sorting issues with the new members list.
* BUG FIX: Fixed issues with the sales report widget and breakdown by price.
* BUG FIX: Now showing an appropriate message if you search for members, levels or discount codes in the dashboard and there are no results.
* BUG FIX: Fixed bug where option to pay with PayPal wouldn't show if paid discount code was applied to free level.

= 2.2 - 2019-11-22 =
* FEATURE: The Members List is now shown in an official "WP List Table". Most columns are sortable. The screen options in the upper right can be used to add/remove columns. (Thanks, Thomas Sjolshagen, Paul Barthmaier, and David Parker)
* FEATURE: Showing useful notifications in the PMPro dashboard area. Notifications are shown no more than once ever 12 hours, and no more than 3 times every week. The PMPro Advanced Settings page has an option to only show security-related notifications.
* SECURITY: Better sanitizing of values in the 2Checkout INS handler.
* BUG FIX: Fixed issue since WP 5.3 where expiration dates and other dates could be off by a month after saving.
* BUG FIX: Fixed issue where Stripe orders processed through the webhook would use the current date instead of the date of the order. This was an issue if you had to rerun a webhook later.
* BUG FIX: Fixed issue level confirmation text was sometimes not shown in emails when it was supposed to.
* BUG FIX: Russian Rubles are now configured to have 2 decimals again. In practice, decimals aren't often used for rubles and we are looking into ways to store the decimals (because gateways like Stripe need them) while showing values without decimals.
* BUG FIX: Fixed bug where the "logged in as" message would sometimes show twice on the update billing page.
* BUG FIX/ENHANCEMENT: Updated dashboard to adopt WordPress 5.3 formatting updates.
* BUG FIX/ENHANCEMENT: Updated frontend pages to improve cross-browser and cross-theme compatibility.
* BUG FIX/ENHANCEMENT: New free orders will always have the "success" status after checkout.
* BUG FIX/ENHANCEMENT: Better handling of tax values in the PayPal IPN handler.
* ENHANCEMENT: Added "Edit User" and "Edit Order" links to the admin email when a gateway subscription fails to cancel.

= 2.1.4 - 2019-10-31
* BUG FIX: Better exception handling in the Stripe gateway class for PHP 7+.
* BUG FIX: Fixing some JS issues at checkout, e.g. related to the "validateCreditCard method is not available" error.
* BUG FIX: Better messaging if the Stripe Billing Limits Add On is already installed.
* BUG FIX: Fixed cases where PMPro would email users about credit cards expiring when they had used an offsite gateway like PayPal Express.
* BUG FIX: Fixed issue where some user information was missing from the pmpro_orders_user_row_actions filter.
* BUG FIX: Fixed issues where the level confirmation text was not available in some cases.
* BUG FIX/ENHANCEMENT: Updates to the French language translation.

= 2.1.3 - 2019-10-14 =
* BUG FIX: Updating Stripe subscriptions from the edit user page will no longer cause an extra charge.
* BUG FIX: Correctly localizing the expiration date on the frontend account page.
* BUG FIX: Moved the row actions on the orders page into the correct column. (Thanks, Tim Sparks)
* BUG FIX: Fixed issue with CSV exports if the fpassthru function is unavailable.
* BUG FIX: Fixed warning that occurred when the Email Log plugin was active. (Thanks, Matty Cohen)
* BUG FIX: Fixed warning that occurred with sessions sometimes. (Thanks, Matty Cohen)
* ENHANCEMENT: Made labels and styling more consistant across settings pages.
* ENHANCEMENT: The Consent Log will go into a scrollable box if more than 10 items are in the list.
* ENHANCEMENT: Updated the copy on the license page.

= 2.1.2 - 2019-09-26 =
* BUG FIX: Fixed bug where Stripe subscriptions weren't updated to use the new payment method when users updated their billing method on the Update Billing page. You may have users with an updated "default payment method" but their subscriptions still need to be updated manually in Stripe to use that new method. Otherwise, payments will fail. This is fixed going forward.
* BUG FIX: Fixed bug where PMPro Blocks were sometimes not loading on the edit post page.
* BUG FIX: Fixed bug where discount codes would cause ugly warnings to be shown on the checkout page.
* BUG FIX: Fixed bug where custom templates would sometimes not load.
* BUG FIX: Fixed issue where a warning was thrown sometimes when loading SESSION vars.
* ENHANCEMENT: Moved the License page under Memberships.
* ENHANCEMENT: Updated our UTM tracking links in various places we link to the Paid Memberships Pro website.
* ENHANCEMENT: Added some help text and links to popular add ons in a few places in the PMPro settings.

= 2.1.1 - 2019-09-16 =
* BUG FIX: Fixed issue with SCA authentications via Stripe for subscriptions with a $0 initial payment. (Thanks, mjulian87 on Github.)
* BUG FIX: Fixed issue where code was shown in the message box when applying a discount code.
* BUG FIX: Fixed issue where pmpro_is_checkout() would always return true if no checkout page was set. This caused JavaScript issues on non-checkout pages.
* BUG FIX: The SVN repo on WordPress.org was missing a file for about 10 minutes after version 2.1 was pushed. Users who upgraded during this time may be missing that file. Updating now will restore it.

= 2.1 - 2019-09-13 =
* FEATURE: Updated Stripe integration to support Stripe v3, Stripe Elements, and their Secure Customer Authorization process.
* FEATURE: Updated how we store prices to support up to 8 decimals (e.g. for Bitcoin gateway implementations).
* ENHANCEMENT: Improved error messaging on the update billing page when a gateway doesn't support it or the user's current membership doesn't have a subscription.
* ENHANCEMENT: Added a  pmpro_is_checkout() function that will return true if on the PMPro checkout page or a page with the PMPro checkout shortcode or block.
* ENHANCEMENT: Showing a warning message when a user about to be deleted has a membership so admins know that existing subscriptions will be deleted at the gateway.
* ENHANCEMENT: Added a pmpro_braintree_plan_id filter in case you need to adjust plan IDs. This is useful if you have several sites running on the same Braintree account.
* ENHANCEMENT: Added a pmpro_num_expiration_years filter to adjust the number of years to include in the dropdown to set the year membership will expire.
* ENHANCEMENT: Tweaked the UI of the orders list and members list in the dashboard.
* ENHANCEMENT: Added pmpro_membership_levels_table_extra_cols_header and pmpro_membership_levels_table_extra_cols_body hooks to add columns to the members list.
* ENHANCEMENT: Showing notices to admins when categories are hidden from them on the frontend of the site.
* ENHANCEMENT: Added a pmpro_url filter to filter URLs returned from that function.
* ENHANCEMENT: Adding a pmpro_checkout_gateway-stripe or pmpro_checkout_gateway-paypal/etc CSS class to the wrapping div for payment fields to aid in styling.
* ENHANCEMENT: Using the site's date format option when printing orders.
* BUG FIX/ENHANCEMENT: If a site has no paying levels, the test gateway will show as the "Default" gateway and we will no longer show a message about requiring gateway setup on the checkout page.
* BUG FIX/ENHANCEMENT: Updated Russian Ruble definition to have 0 decimals and use &nbsp; as the thousands separator. (Thanks, Airat Halitov)
* BUG FIX/ENHANCEMENT: Using add_query_arg when generating IPN URLs to avoid issues on sites that aren't using pretty permalinks or have moved their admin directory.
* BUG FIX/ENHANCEMENT: Fixed issue on advanced settings page where clicking on labels didn't check the corresponding check boxes.
* BUG FIX/ENHANCEMENT: Updated our pmpro_generateUsername() function to be a bit smarter.
* BUG FIX/ENHANCEMENT: Now using wp_generate_password() when choosing a random password for a user (e.g. when using the Sign Up Shortcode add on or the $skip_account_fields global).
* BUG FIX/ENHANCEMENT: Setting autocomplete to false on the "fullname" honeypot field. This will prevent user's with certain autocomplete tools from accidentally filling it out.
* BUG FIX/ENHANCEMENT: Now sending name and email fields to PayPay (using Website Payments Pro) even if no address was captured.
* BUG FIX/ENHANCEMENT: More specific CSS selectors for checkout form elements to make sure errors are highlighted/etc with different themes.
* BUG FIX: Fixed issue where the first 2000 or so orders might be skipped when exporting orders on large sites.
* BUG FIX: Fixed issue with setting custom trials on discount codes.
* BUG FIX: Fixed issue in the SQL query in the pmpro_calculateInitialPaymentRevenue() function. This function is deprecated, but still used by some custom code.
* BUG FIX: Fixed issue where default templates would fail to load if a custom template was specified.
* BUG FIX: Fixed fatal errors that could happen when using the PMPro REST API endpoints.
* BUG FIX: Fixed bug where the invoices page would sometimes show data for the current (admin) users instead of the user the invoice was for.
* BUG FIX: Fixed bug where the membership stats graphs would sometimes show up blank.
* BUG FIX: Now falling back to using readfile() if fpassthru() doesn't existing.
* BUG FIX: Fixed issue where the from name and email were not set properly if the Only Filter PMPro Emails setting was checked. (Thanks, mjulian87 on GitHub)
* BUG FIX: Fixed several error handling issues with the Cybersource gateway integration.
* REFACTOR: Moved JavaScript out of pages/checkout.php and other places into files in the /js/ folder. This will avoid issues where other JS at checkout breaks PMPro checkout and will improve compatibility with tools that optimize JS.
* REFACTOR: Added unit testing and a started on coverage of some functions in includes/functions.php. (Thanks, Mike Auteri)
* REFACTOR: The JS function askfirst is now prefixed as pmpro_askfirst.

= 2.0.7 - 2019-05-30 =
* BUG FIX: Fixed issue where the profile start date would sometimes be set incorrectly on the Stripe subscription.
* BUG FIX: Fixed issue where the membership shortcode would not work properly if more than one level name was given.
* BUG FIX: Fixed issue where an incorrect email address was sometimes set in the confirm email field on the update billing page. (Thanks, Jessica Thomas)
* BUG FIX/ENHANCEMENT: Fixed placement of the hr tag above the user fields at checkout for consistency.
* ENHANCEMENT: Set the priority on the Require Membership meta box to "high" so it appears higher in the right sidebar.

= 2.0.6 - 2019-05-30 =
* SECURITY: Now using wp_safe_redirect when possible, especially in includes/login.php where the user-provided redirect_to URL parameter is used. (Thanks PluginVulnerabilities.com)

= 2.0.5 - 2019-04-25 =
* BUG FIX: Fixed fatal error on return from 2Checkout.
* BUG FIX: Removed error when installing PMPro via WP-CLI.
* BUG FIX: Fix database upgrade error on localhost environment. (Thanks, codezz on GitHub)
* BUG FIX: Fixed issue where the credit card expiring email didn't include user info because the user ID wasn't passed in properly. (Thanks, David Cervantes Caballero)
* BUG FIX: Fixed typo on edit level page. (Thanks, Theuns Coetzee)
* BUG FIX: Fixed bug with daily revenue reports not showing up in some cases.
* BUG FIX: Now checking before cancelling a Stripe subscription at the gateway to see if it has already been cancelled.
* BUG FIX/ENHANCEMENT: Now caching the query results in pmpro_getMembershipLevelsForUser(). This improves performance, especially when there are many posts on one page to check membership for. (Thanks, Seagyn Davis)
* BUG FIX/ENHANCEMENT: Now sending display_name to the $data array passed to PMPro email filters. (Thanks, David Cervantes Caballero)
* BUG FIX/ENHANCEMENT: Now searching for the last order with "success" or "pending" status on the Billing page.
* BUG FIX/ENHANCEMENT: Added pmpro_checkout_preheader_before_get_level_at_checkout and pmpro_checkout_preheader_after_get_level_at_checkout action hooks. Using pmpro_checkout_preheader_before_get_level_at_checkout to start the session earlier now.
* BUG FIX/ENHANCEMENT: Removed the "membership_code_id" and "membership_code" as field options for the member shortcode. These weren't working and it's unclear what would be meant to ask for a user's discount code since a user could have several orders with or without discount codes. Added "membership_description" and "membership_confirmation" instead.
* BUG FIX/ENHANCEMENT: Filtering the password reset message to make sure the link still works in all cases when we convert emails to HTML.
* BUG FIX/ENHANCEMENT: Added reCAPTCHA v3 and invisible reCAPTCHA support. It is recommended sites using Stripe or Braintree update to the reCAPTCHA v3 option. Read more here: https://www.paidmembershipspro.com/pmpro-update-2-0-5/
* REFACTOR: Now running the pmpro_billing_preheader hook after the jquery.creditCardValidator script is enqueued in preheader/billing.php to match how we do it in preheader/checkout.php. (Thanks, Rafe Colton)

= 2.0.4 - 2019-01-14 =
* BUG FIX: Fixed warning in code added in 2.0.3 that could cause issues at checkout.
* BUG FIX: Setting priority of pmpro_check_admin_capabilities to 5 to ensure it runs before dashboard redirect.
* BUG FIX: Removed duplicate id attribute on the Membership Account page "cancel" action link.
* BUG FIX/PERFORMANCE: No longer enqueueing frontend.blocks.js which had no functional code, but loaded a lot of Gutenberg JS that wasn't needed on the frontend. When/if our blogs have frontend JS, we will load it again, but also make sure the dependencies are correct.
* BUG FIX/PERFORMANCE: No longer loading blocks.style.css. These frontend styles were redundant with CSS in css/frontend.css.
* NOTE: The SVN repository was missing the 2.0.3 tag when that update went out. Some users may have updated or tried to update and not gotten the correct files for 2.0.3. Everyone should update to 2.0.4, which is Gucci.

= 2.0.3 - 2019-01-11 =
* BUG FIX: Fixed issue where code in the Stripe gateway was cancelling old subscriptions early if users renewed with a different gateway. NOTE: There was a fix for this in version 2.0, but it wasn't implemented fully.
* BUG FIX: Filtering pmpro_other_order_ids_to_cancel to make sure the current checkout's order doesn't get cancelled. This started happening in version 2.0 since we started setting the user_id on orders for existing users before the checkout was fully processed. This fix along with the one above and others will fix cases where users were being cancelled immediately after checkout.
* BUG FIX: Fixed warning on edit levels page by defaulting $confirmation_in_email to 0.

= 2.0.2 - 2019-01-10 =
* BUG FIX: Fixed issues when using non-US currencies. Using the pmpro_round_price function in a few places it was needed. Prepared for a later update that will increase the number of decimals on certain columns in the DB to 8 to support currencies like Bitcoin, but shelving the actual DB update for version 2.1.
* BUG FIX: Fixed issue where existing users who checked out could run into problems. Added a getMembershipLevelAtCheckout method to the MemberOrder class and using that during checkout. The getMembershipLevel method would see the user_id property of the order (added to orders at checkout in version 2.0) and lookup the level data from the pmpro_memberships_users table instead of using the pmpro_level global. Then gateways like PayPal Express (but others also) would use the wrong data when making calls to pmpro_isLevelRecurring/etc.
* BUG FIX: Fixed bug where a notice to deactivate the Better Logins Report plugin could show up for users who couldn't deactive the plugin.
* BUG FIX: Fixed bad translation in the membership_expired.html file of the French translation.
* BUG FIX: Fixed some strings on updated reports that weren't wrapped for translation.

= 2.0.1 - 2019-01-03 =
* BUG FIX: Fixed issue where the PMPro dashboard and reports pages would appear blank if certain other plugins were active.

= 2.0 - 2018-12-31 =
* SECURITY: Fixing how we escape things in the Memberships report SQL queries.
* BUG FIX: Fixed issue where code in the Stripe gateway was cancelling old subscriptions early if users renewed with a different gateway.
* BUG FIX: Fixed a warning on the Stripe Webhook service.
* BUG FIX/ENHANCEMENT: Removing unused images from core plugin.
* BUG FIX/ENHANCEMENT: Removed unused `getTimestamp` function.
* BUG FIX/ENHANCEMENT: Updated Braintree/PHP Library to 3.36.0
* BUG FIX/ENHANCEMENT: Prefixing Braintree plan name with `pmpro_#`
* BUG FIX/ENHANCEMENT: Better table naming in queries for Memberships and Sales reports.
* BUG FIX/ENHANCEMENT: Changing "blacklist" to "blocklist".
* BUG FIX/ENHANCEMENT: Changing the appearance of the Discount Code "Apply" button on checkout to look more like a text link.
* BUG FIX/ENHANCEMENT: Now calculating the next payment date with time, not SQL.
* BUG FIX/ENHANCEMENT: Updated the pmpro_next_payment method of Stripe to check if a customer is delinquent to avoid returning a next payment date in the future if the last payment failed.
* BUG FIX/ENHANCEMENT: Saving user ID in MemberOrder when a user already exists and they are checking out via an offsite gateway.
* BUG FIX/ENHANCEMENT: Updating Stripe Webhook and PayPal IPN Handler to send the cancelled level ID for better cancellation emails.
* BUG FIX/ENHANCEMENT: Brought back the Stripe Billing limit warnings. Here is a plugin to get billing limits working with Stripe https://github.com/strangerstudios/pmpro-stripe-billing-limits/blob/master/pmpro-stripe-billing-limits.php
* FEATURE: Gutenberg / v5.0 Editor Blocks for Paid Memberships Pro pages, the Checkout Button and Membership "shortcode" functionality.
* FEATURE: Added new "Dashboard" page and adjusted the entire menu structure for "Memberships".
* FEATURE: Created new compatibility checks and included compatibility functions for Beaver Builder, Elementor, and SiteOrigin Page Builder. 
* FEATURE: Added REST API routes for post membership access, and user membership level.
* FEATURE: Added option to include the level's Confirmation Message in the Confirmation Email.
* FEATURE: Added a filter by discount code to Memberships and Sales reports.
* FEATURE: Added a filter by discount code to the Orders admin page.
* FEATURE: Added a "Copy" option to discount codes.
* FEATURE: Now allowing you to edit or add a discount code to a single Order edit.  
* FEATURE: Added the ability to export orders by discount code used.
* FEATURE: Added new file for deprecated functions or hooks.
* ENHANCEMENT: Moved "Memberships" menu page up in sidebar below Comments.
* ENHANCEMENT: Replaced the Visits, Views, Logins report with the "Better Logins Report" Add On functionality.
* ENHANCEMENT: Updating reports that use the Google Charts library to use the updated chart library (corechart.js).
* ENHANCEMENT: Reports admin page is now loading reports via the `add_meta_box` WordPress function.
* ENHANCEMENT: Added ability to filter membership reports for free or paid levels only.
* ENHANCEMENT: Setting a default level at checkout so that the page doesn't redirect to the Levels page.
* ENHANCEMENT: Showing the discount code used on the All Orders and single Order edit page.
* ENHANCEMENT: Added ability to filter Orders by Free (Orders equal to $0), Paid (Orders greater than $0)
* ENHANCEMENT: Now showing the Invoice's Order Status on the Membership Account page for orders (Paid, Pending or Refunded).
* ENHANCEMENT: Adding additional quick search links when no members are found in members list search.
* ENHANCEMENT: Added a check on the Add Ons page to hide Add Ons that are no longer supported or recommended.
* ENHANCEMENT: Improved Responsive layout of the Memberships admin area for smaller devices.
* ENHANCEMENT: Adding .gitattributes and gitignore. Important now for node stuff in particular.

= 1.9.5.6 - 2018-11-15 =
* BUG FIX: Fixed issue where Braintree would try to cancel a subscription twice if it was cancelled on the Braintree side.
* BUG FIX: Fixed bug in Braintree webhook when using certain versions of PHP.
* BUG FIX: Correct Braintree plans flagged as faulty.
* BUG FIX/ENHANCEMENT: Added Order Code to the Orders Export CSV
* BUG FIX/ENHANCEMENT: Removed another warning RE billing limits with the Stripe gateway. (Thanks, Jordan Kohl)
* ENHANCEMENT: Added the pmpro_include_pricing_fields filter.
* ENHANCEMENT: Adding IDs to action links in the account shortcode so users can target them with CSS/JS.
* ENHANCEMENT: Updated French Translation. (Thanks, Pascal)
* ENHANCEMENT: Retina logo on dashboard pages.
* ENHANCEMENT: Showing what PMPro page a page is in the Post List table of the WP dashboard.

= 1.9.5.5 - 2018-10-19 =
* BUG FIX: Fixed fatal error in the Braintree webhook that will have caused syncing issues for Braintree users.
* BUG FIX: Stopped sending the cancel subscription request to the PayPal API if we are processing the IPN request for the same subscription.
* BUG FIX: Fixed issue where the Stripe API version was shown for non-Stripe gateways on the payment settings page.
* BUG FIX: Using self:: instead of static:: in the Stripe class that could keep the pmpro_stripe_customerid from being updated.
* BUG FIX: Fixed some fatal errors in PHP 5.2. (We still recommend a minimum PHP 5.6.)
* BUG FIX/ENHANCEMENT: Removed a unnecessary hr element when viewing the table of all active memberships.
* BUG FIX/ENHANCEMENT: Cleaned up some CSS code around buttons.
* BUG FIX/ENHANCEMENT: Added formatting for the Danish Krone.
* BUG FIX/ENHANCEMENT: Removed the warning RE billing limits with the Stripe gateway. Our Stripe implementation has actually supported billing limits for a while.
* ENHANCEMENT: Added Kenyan Shilling as a currency. (Thanks, Urandu Bildad Namawa)
* ENHANCEMENT: Updated the description, url, email, and copyright info in the plugin header.
* ENHANCEMENT: Now showing a note on the pages list in the dashboard if a page is linked to a PMPro page.
* ENHANCEMENT: Improving logo and watermark in the dashboard for retina displays.

= 1.9.5.4 - 2018-09-10 =
* SECURITY: Some values used in SQL queries in our reporting code were sanitized but not later escaped via esc_sql(). All variables added to SQL queries in the reports are now wrapped in esc_sql(). The previous code was not vulnerable to any known attack, but this change hardens the code against vulnerabilities in the case other parts of the code change in the future.
* BUG FIX: Fixed issue with lost passwords when Theme My Login 7 is active. (Thanks, Jeff Farthing)
* BUG FIX: No longer sending an "error canceling the subscription" email when subscriptions are cancelled from Stripe.
* BUG FIX: Fixed issue where TwoCheckout orders were not correctly updating the TOS consent data. (Thanks, Charl P. Botha)
* BUG FIX: Fixed issue where privacy function weren't defaulting to $current_user correctly. In practice, we were always passing a user_id anyway.
* BUG FIX/ENHANCEMENT: Changed the confirmation message to use wpautop instead of apply_filters('the_content'). If you were relying on shortcodes or other content that required that filter, you use add_filter('pmpro_level_description', 'the_content') to revert this for your site.
* BUG FIX/ENHANCEMENT: Using the strict parameter of sanitize_user when getting usernames. This will prevent some special characters from being used in usernames at checkout. This is inline with WP core and other plugins. (Thanks, David Cervantes Caballero)
* ENHANCEMENT: Added a breakdown of orders at each price point to the Sales Report widget
* ENHANCEMENT: Showing the Stripe version we use on the Payment Settings page.
* ENHANCEMENT: Updated Copyright date and GPLv2 link in license.txt.

= 1.9.5.3 - 2018-06-26 =
* BUG FIX: The pmpro_ipnhandler_extend_memberships function actually needed use $user_id instead of $current_user.

= 1.9.5.2 - 2018-06-26 =
* BUG FIX: Fixed compatibility with Theme My Login version 7. (Thanks, Jeff Farthing)
* BUG FIX: Fixed missing $current_user bug in pmpro_ipnhandler_level_extend_memberships function. (Thanks, Anne)

= 1.9.5.1 - 2018-06-08 =
* BUG FIX: Fixed issue with the PayPal IPN Handler where existing users checking out for a new level would sometimes have their membership and new subscription cancelled.
* BUG FIX: Fixed PayPal IPN Handler to set the status of old levels to 'changed' (instead of 'inactive') when processing checkouts. This will improve the accuracy of reports.
* BUG FIX/ENHANCEMENT: Now checking for the recurring_payment_skipped transaction type in the PayPal IPN handler. When a payment is skipped and this message is sent, we will now fire off the failed payment email to the customer and admin. (Thanks, mjulian87 on GitHub)
* ENHANCEMENT: Removed validation info from the IPN log.
* ENHANCEMENT: Updated German (de_DE) language files.

= 1.9.5 - 2018-05-24 =
* BUG FIX: Added 'error' to the list of default order statuses.
* BUG FIX: Fixed issue where PayPal recurring_payment messages with status "Pending" were treated as "Failed" by our IPN handler. (Thanks, Matt Julian)
* BUG FIX: The redirect away from the billing page needed to be in the preheader instead of the page shortcode.
* BUG FIX/ENHANCEMENT: Using the pmpro_getOrderStatuses() function in adminpages/orders.php instead of redundant code there.
* BUG FIX/ENHANCEMENT: Passing the $order as a second parameter to pmpro_after_checkout when called from the PayPal IPN handler. (The $order was being passed already for "regular" checkouts.)
* ENHANCEMENT: You can now sort by the Membership Level column added to the users list in the dashboard. (Thanks, Matt Julian)
* FEATURE: Added support for the privacy features added in WP 4.9.6. Details below.
* FEATURE: Added suggest privacy page text.
* FEATURE: Added PMPro-related user meta fields, membership history, and order history to the personal data export. You can filter which user meta fields are included in the export using the new pmpro_get_personal_user_meta_fields filter.
* FEATURE: Deleting PMPro-related personal data fields when personal data is erased. The ereaser deletes a number of user meta fields (filterable through the new pmpro_get_personal_user_meta_fields_to_erase filter). A user's membership history and order history are retained unless the user is deleted.
* FEATURE: Now saving a log of when the TOS page is agreed to at checkout. The ID and date modified of the TOS post is saved along with a timestamp of when the TOS was agreed to. This information is shown on the single order page in the admin, the orders CSV export, and on the edit user profile page in the admin. Note that this feature does not yet backport any data for existing users or ask users to re-agree to the TOS if the TOS has gone out of date.

= 1.9.4.4 - 2018-03-14 =
* BUG FIX: Updated the filters to extend membership levels to use the new pmpro_getSpecificMembershipLevelForUser() function to avoid bugs when MMPU is enabled.
* BUG FIX: Fixed cases where certain email templates were resulting in the body of the email being duplicated.
* BUG FIX: Fixed conflict with pmpro-email-templates when emails were disabled (the pmpro_email filter returns false). (Thanks, Mathieu Hays)
* BUG FIX: Now updating status on related subscription orders BEFORE canceling at gateway to avoid cases where the webhook sent by the gateway after canceling the subscription triggers further cancellation attempts.
* BUG FIX: No longer showing the "Stripe Publishable Key appears incorrect" error message if the key field is blank.
* ENHANCEMENT: Added the pmpro_getSpecificMembershipLevelForUser( $user_id, $level_id ) function for cases where MMPU is enabled and you want data about a specific membership level a user might have.
* ENHANCEMENT: Changed labels on the reCAPTCHA settings to match their current terminology: Site Key and Secret Key.

= 1.9.4.3 - 2018-01-04 =
* BUG FIX: Fixed issue where PMPro would attempt to cancel gateway subscriptions more than once in some cases.

= 1.9.4.2 - 2017-12-07 =
* BUG FIX: Avoid double-encoding the API version in PayPal Standard gateway
* BUG FIX: The update billing page now checks the gateway of the user's last order instead of the default gateway settings in case multiple gateways are in use or the default gateway has changed.
* BUG FIX: Fixed bug where discount codes were not being applied properly if the pmpro_default_level custom field was set and used on a page.
* BUG FIX: Credit card expiration emails were being to sent to members with PayPal Express orders.
* BUG FIX: Now correctly unslashing instructions for the check gateway.
* BUG FIX: Fixed issue with creating pages from the page settings page.
* BUG FIX/ENHANCEMENT: Improved submit button and processing message position for default and RTL on checkout page.
* BUG FIX/ENHANCEMENT: Added invoice total and total billed breakdown back to confirmation and invoice single views.
* BUG FIX/ENHANCEMENT: Avoid double-encoding the PayPal API version number
* ENHANCEMENT: Improved submit button and processing message position for default and RTL on checkout page.
* ENHANCEMENT: Switched order of Publishable and Secret Key fields and added validation check.
* ENHANCEMENT: Conditionally update members list headings for expired, cancelled, or old members.

= 1.9.4.1 - 2017-10-31 =
* BUG FIX: Fixed serious bug where payment fields weren't showing up for the Braintree gateway.
* BUG FIX: Fixed issue where Braintree webhook notifications were failing. We now allow the Braintree library to sanitize the incoming data since our sanitizing efforts were breaking the validation.
* BUG FIX/ENHANCEMENT: The webhook URL given for Braintree now goes through admin-ajax.php instead of a direct link to a php file within our plugin.
* BUG FIX/ENHANCEMENT: Updates to the Recaptcha library. (Thanks, Corin Simpson-Bryars)
* ENHANCEMENT: Made the cancelation failed error email easier to read.

= 1.9.4 - 2017-10-26 =
* BUG FIX: Fixed issue where PayPal was not working for amounts over $1000.
* BUG FIX: Non-decimal currencies now handled correctly with Stripe.
* BUG FIX: Fixed issue where updating a Stripe subscription from the edit user page could cancel the subscription once the webhook fired.
* BUG FIX: Fixed issue where "admin_cancelled" memberships weren't being calculated correctly in membership reports.
* BUG FIX: Fixed issue where users could not drag and drop to change the order of membership levels.
* BUG FIX: pmpro_getMembershipLevelsForUser() would sometimes return duplicate levels in the array if the user had multiple active entries in the pmpro_memberships_users table.
* BUG FIX: Updated includes/metaboxes.php to call pmpro_getAllLevels() instead of relying on the $membership_levels global which is problematic.
* BUG FIX: Fixed a few strings that weren't wrapped for translation or were using the old text domain.
* BUG FIX: Fixed redirect error that occured when the levels page was not set.
* BUG FIX: Updated getfile.php to support file names with urlencoded characters (e.g. spaces) in them. (Thanks, florent from PMPro blog)
* BUG FIX: Fixed notice when use the getfile.php script due to using add_filter instead of apply_filters in the mimetype class.
* BUG FIX: Fixed the all time views column for the logins report.
* BUG FIX: Fixed fatal error on the logins report, member shortcode and other issues when using PHP7.1+.
* BUG FIX: Fixed issue with saving arrays using pmpro_setOption()
up the lines of text.
* BUG FIX: Fixed typo in the string "Are you sure you want to do that? Try again."
* BUG FIX: Fixed a few strings that used the wrong text domain or weren't wrapped correclty for translation.
* BUG FIX/ENHANCEMENT: Now bundling Google's jsapi.js file for use in the reports.
* BUG FIX/ENHANCEMENT: Fixed issue where some emails (e.g. the password reset email) would not have wpautop applied to them, crunching
* BUG FIX/ENHANCEMENT: Better checking for Theme My Login compatibility when handling login redirects.
* BUG FIX/ENHANCEMENT: Better error handling for Braintree.
* BUG FIX/ENHANCEMENT: Membership stats widget now shows first 3 levels based on level order.
* BUG FIX/ENHANCEMENT: Added the pmpro_member_shortcode_access filter
* ENHANCEMENT: Updated the Stripe PHP library to version 5.2.2 and updated Stripe to use the latest version of their API, 2017-08-15.
* ENHANCEMENT: Changed frontend pages (e.g. checkout.php) to use a div-based layout instead of tables. Important information here if you are using custom page templates or notice UI issues after upgrading:
* ENHANCEMENT: Added pagination to the discount codes page in the admin. Also sorting codes in descending order by ID. Use the pmpro_discount_codes_per_page filter to change the per page limit from 15.
* ENHANCEMENT: Updated plugin admin pages with better links to documentation and support.
* ENHANCEMENT: Updated plugin frontend pages checkout, billing, confirmation, and single invoice to remove most table based layouts.
* ENHANCEMENT: Better error message if trying to checkout using an existing user's email address.
* ENHANCEMENT: Added the pmpro_report_levels filter to let users change levels and order of levels for the memberships.php report.
* ENHANCEMENT: Updated video and copy for readme.txt.
* ENHANCEMENT: Added user display name to Memberlist search query
* ENHANCEMENT: Added Russian Ruble as a currency.
* ENHANCEMENT: Changed the dated term "CVV" to "Security Code (CVC)" when shown on the frontend.
* ENHANCEMENT: Added .doc and .docx to the mimetype class.
* ENHANCEMENT: Added Portuguese language files. (Thanks, Secundino Correia)
* ENHANCEMENT: Updated plugin admin pages with better links to documentation and support.

= 1.9.3 - 2017-07-06 =
* SECURITY: Fixed sanitization of inputs and added nonces in several places to protect against XSS attacks.
* BUG FIX: Showing correct error message when trying to update a PMPro Plus add on with a Core license installed.
* BUG FIX: Fixed issue where subscription and payment transaction IDs were not being saved correctly when copying an order in the dashboard. (Thanks, Pippin Williamson)
* BUG FIX: Fixed fatal errors that occurred in certain PHP versions.
* BUG FIX: Fixed issue where ProfileStartDate was being calculated incorrectly in the test, check, and Cybersource gateways.(Thanks, David Parker)
* ENHANCEMENT: Added a pmpro_sanitize_with_safelist() function that is used to sanitize inputs that have a limited number of exact options.
* ENHANCEMENT: Updated the pmpro_setOption() and pmpro_getParam() functions to take a new last parameter $sanitize_function, which defaults to 'sanitize_text_field'.

= 1.9.2.2 - 2017-06-13 =
* BUG FIX: Fixed warnings on the Network Dashboard's sites page.
* BUG FIX: Skipping update scripts that require the Stripe library if the system doesn't support the minimum requirements for the Stripe API. This avoids warnings and errors during upgrade.

= 1.9.2.1 - 2017-06-05 =
* BUG FIX: Fixed issues with activation on single sites.
* BUG FIX: Starting PHP sessions earlier to fix issues with PayPal/PayPal Express checkouts.

= 1.9.2 - 2017-06-03 =
* BUG FIX: Fixed issue where Braintree checkouts were failing with a CVV error when existing users checked out.
* BUG FIX: Fixed issue loading the Stripe library in PHP 5.6.
* BUG FIX: Member List CSV export was ignoring search parameter.
* BUG FIX: Discount codes weren't being remembered during the "review" step of a PayPal Express checkout. (Thanks, Rafe Colton)
* ENHANCEMENT/FIX: Search Filter would trigger incorrectly for REST API request by slug.
* ENHANCEMENT/FIX: Didn't always identify MasterCard cards correctly to set the CardType with some gateways.
* ENHANCEMENT/FIX: Some custom code or add ons (e.g. the Prorating and Auto-renewal Checkbox add ons) would sometimes break PayPal Website Payments Pro and PayPal Express subscriptions by trying to set the "Profile Start Date" longer than 1 year out. We now limit the Profile Start Date to 1 year out and try to squeeze up to 1 additional year into a trial if it's not already being used. This bug affects PayPal Standard as well, but the fix is different and not included in this release.
* ENHANCEMENT: Tested up to WordPress 4.8.
* ENHANCEMENT: Made countries translatable.
* ENHANCEMENT: Improved performance via PHP $_SESSION management improvements. We now only open the session before we set session vars and close the session when we are finished with it.
* ENHANCEMENT: Added to code to stop network activation of Paid Memberships Pro. (Thanks, Paul Barthmaier)

= 1.9.1 - 2017-05-11 =
* BUG FIX: Fixed the code checking if the Stripe library is already loaded to compatibility issues with other plugins bundling the Stripe API library.
* BUG FIX: Cancel code now properly uses preg_replace when sanitizing the list of level ids to cancel.
* FIX/ENHANCEMENT: Removed test/doc code from Stripe and Braintree libraries.
* ENHANCEMENT: Now pausing the license nag for the first week of use and removed the "invalid" error if no key is being used.

= 1.9 - 2017-04-26 =
* BUG: Fixed issue with cancelling 2Checkout recurring subscriptions. Now using the payment_transaction_id to find/cancel the sale's recurring subscription since no subscription_transaction_id is being saved.
* BUG: Fixed issue where old membership levels were not listed correctly in the cancellation email. (Thanks, Mike from Migrating Eye)
* BUG: Fixed issue where "custom trial" values were not saving for discount codes.
* BUG: Fixed issue where checkouts were still processing even if there were errors with the discount code used.
* BUG: Fixed bug where settings added via the pmpro_custom_advanced_settings were not being saved to DB unless they were prefixed with custom_.
* BUG: Fixed other formatting issues with settings added via pmpro_custom_advanced_settings.
* BUG: Fixed issue where the sendInvoiceEmail method of the email class was expecting $order->discount_code to be a string, but it was sometimes a discount code object. (Thanks, Bill Stoltz)
* FEATURE: Added the pmpro_member shortcode. See the Paid Memberships Pro website for documentation.
* ENHANCEMENT: Added pmpro_account_membership_expiration_text filter to filter the expiration text that shows ona  user's membership account page.
* ENHANCEMENT: Updated our Stripe and Braintree libraries to use their latest versions. This update allows our gateway integrations to support PHP7 and also removes support for PHP 5.2 and 5.3.
* ENHANCEMENT: The Braintree level compatibility check now also looks for a properly named plan.
* ENHANCEMENT: Better error handling when trying to update plugins that update against the PMPro license server.
* ENHANCEMENT: Improved Italian translation. (Thanks, Francesco Pezzotti)
* ENHANCEMENT: Improved German tranlsation. (Thanks, Simon)
* ENHANCEMENT: Added a Sweedish tranlsation. (Thanks, Mathias Persson)
* ENHANCEMENT: Added a "Chinese/Cantonese (Hong Kong SAR China)" tranlsation. (Thanks, Kai Chan)

= 1.8.13.6 =
* BUG: Fixed bug where credit card expiration emails would be sent to users with PayPal Express orders.
* BUG: Fixed bug when updating billing with Stripe.
* BUG: Fixed bug where the archive/search filter was not running for logged out users.
* ENHANCEMENT: Updated Finnish translations. (Thanks, JP Jakonen)
* ENHANCEMENT: Added filter for modifying the order description in Stripe. (Thanks, Rafe Colton)

= 1.8.13.5 =
* BUG: Fixed notifications.php to make sure it really only checks once per day. Also updated the URL checked to notifications.paidmembershipspro.com, which runs on its own server.

= 1.8.13.4 =
* BUG/ENHANCEMENT: Changed the pmpro_button shortcode to pmpro_checkout_button. (The old pmpro_button will also still work. checkout_button works if you have Register Helper installed.)

= 1.8.13.3 =
* BUG: Fixed bug when using a secondary gateway (e.g. PayPal Express) with Stripe as your primary gateway.

= 1.8.13.2 =
* BUG: Fixed bug with updating credit cards through Braintree.
* BUG: Fixed bug with updating credit cards through Stripe.
* BUG: Fixed SQL warnings when generating the pmpro_membership_levelmeta table. (Thanks, itibet on GitHub)
* BUG/ENHANCEMENT: Moved some update billing and checkout related code from the preheaders and page templates into the Braintree and Stripe classes.
* ENHANCEMENT: Added pmpro_billing_order filter that functions similar to pmpro_checkout_order.
* ENHANCEMENT: Added pmpro_billing_before_submit_button hook that functions similar to the pmpro_checkout_before_submit_button hook.
* ENHANCEMENT: Clicking on a report widget no longer takes you to the details page. You have to click the details button. This allows us to add additional functionality to the widgets.
* ENHANCEMENT: Updated reports widgets so the "details" button only shows if a page function is defined for that report. You can now have report widgets without details pages.
* ENHANCEMENT: You can now click on a heading in the Membership Stats report widget to see data for up to 3 of your levels. The first 3 levels per the level ordering are shown.

= 1.8.13.1 =
* BUG: Fixed issue where end dates were being set/saved incorrectly from the edit user/profile page in the dashboard.
* BUG: Fixed warnings in the Braintree PHP library. (Thanks, Travis Shivers)
* BUG: Fixed issue where the filtered $mypost object was not being used in the content filter if the post type was "page". (Thanks, James)
* BUG: Removed the extra class="input" attribute on the CVV field when the Stripe gateway is used. (Thanks, Rafe Colton)
* BUG/ENHANCEMENT: Changed the number of X placeholders for masked credit cards to 12 (+ the last 4 stored) instead of 13. (Thanks, Rafe Colton)

= 1.8.13 =
* FEATURE: The Stripe Webhook has been updated to process subscriptions cancelled from Stripe. PMPro will now cancel memberships for these users instead of sending an email to the admin.
* BUG: Fixed various bugs in the PayPal IPN handler.
* BUG: Fixed search on discount codes page in dashboard. (Thanks, Debjit Saha)
* BUG: Fixed bug in Cancellations report where all-time cancellations were always 0.
* BUG: Fixed link to payment settings on checkout notice. (Thanks, Coen Jacobs)
* BUG: Timezone magic on edit user page in the dashboard to make sure the expiration date you select is the one set.
* BUG: Swapped out deprecated uses of eregi_replace and split.
* BUG/ENHANCEMENT: Now using add_query_arg in the pmpro_url() function. (Thanks, Debjit Saha)
* ENHANCEMENT: Updating stylesheet for WordPress 4.7 and new Twenty Seventeen theme support.
* ENHANCEMENT: Now longer warning of membership levels with cycle numbers > 1 when using the Payflow Pro gateway since Payflow now supports cycle numbers (frequencies) > 1.
* ENHANCEMENT: Updated da_DK translation. (Thanks, bopdoq on GitHub)
* ENHANCEMENT: Added pmpro_include_payment_option_for_paypal filter, which can be set to false to use PayPal WPP without the PayPal Express option.
* ENHANCEMENT: Better dependency checking for Stripe and Braintree gateways.
* ENHANCEMENT: Updated IPN handler and Stripe Webhook handler to use pmpro_cancelMembershipLevel instead of pmpro_changeMembershipLevele. This improves support for the MMPU addon.

= 1.8.12.1 =
* BUG: Fixed bug when using the testing gateway.
* BUG: Avoiding issues where is_user_logged in is not yet available for the pmpro_search_filter() function. (Thanks, d_enajetic)
* ENHANCEMENT: Updated Italian translation. (Thanks again, Angelo)
* ENHANCEMENT: You can now define('PMPRO_USE_SESSIONS', false); in your wp-config.php to force PMPro to skip the call to session_start. Note that PayPal Express and some addons require sessions to function.

= 1.8.12 =
* BUG: Fixed issue where "expiring soon" emails were sometimes sent more than needed.
* BUG: Fixed issue where PayPal Standard IPN requests were being rejected if a tax amount was set in PayPal.
* BUG: Fixed issue with Stripe subscription "updates" that were set to fire on "next payment", e.g. if you used Stripe with levels with a non-zero trial amount. When the update processed and created a new subscription, the old subscription was not being deleted and the new subscription ID was not being saved as a new order for future tracking purposes. If you use this feature, please check in Stripe to make sure your users don't have extra subscriptions.
* BUG: Fixed setting in PayPal/PayPal Express API calls from AUTOBILLAMT to AUTOBILLOUTAMT. This setting is set to AddToNextBilling, meaning that failed payment amounts are added to the next billing cycle's amount if left unpaid. In most cases, a retry of the original billed amount goes through or the user's subscription is cancelled. But just in case, this makes sure that outstanding balances are paid. (Thanks, jubstuff on GitHub)
* BUG: Fixed warnings in the setGateway method of the MemberOrder class for cases where the gateway is missing or the class file is not found.
* BUG/ENHANCEMENT: Moved the pmpro_before_change_membership_level hook to fire a little bit earlier to make it easier to determine the old level status/end date/etc before it gets updated. (Thanks, MrVibe on GitHub)
* ENHANCEMENT: Replaced the Force SSL option with an explanation if the entire site is over HTTPS. We are already ignoring the option in these cases.

= 1.8.11.2 =
* BUG: Fixed a bug introduced in 1.8.11 that kept PMPro from tracking coupon code uses. Any checkout with a discount code while running 1.8.11 won't have properly tracked the discount code use. You may want to adjust your "uses" numbers for your codes, and hand check any reporting/etc that relied on discount codes. Users of the Sponsored Members addon will have been affected too. Discount codes will need to be made manually for any sponsor who checked out.
* BUG: Fix to the expiration warnings code. Making sure it finds all members who are expiring soon while also keeping track of when emails are sent so users don't get too many emails.
* BUG: Fixed issue where pmpro_before_change_membership_level was running after levels had been changed.
* BUG: Fixed some warnings.
* ENHANCEMENT: Updated Italian translations. (Thanks, Angelo)

= 1.8.11.1 =
* BUG: Fixed issue introduced in 1.8.11 where the pmpro_default_level custom field was being ignored at checkout.
* BUG: Fixed bugs in DB calls made for the compatibility checks for various gateways.
* BUG: Now sending a FREQUENCY parameter for PayPal Payflow orders.

= 1.8.11 =
* BUG: Fixed URL used when checking for addon updates.
* BUG: Now enqueueing the jquery.creditCardValidator.js file in Billing preheader.
* BUG: Fixed issues where PayPal IPN updates would sometimes log $0 instead of the actual billing amount.
* BUG: Fixed warnings in the PayPal IPN handler.
* BUG/ENHANCEMENT: Added pmpro_checkout_level filter and now using that filter to apply the_content filters to the level description at checkout. This allows you to turn off the the_content filters (e.g. processing shortcodes) by using remove_filter('pmpro_checkout_level', 'pmpro_pmpro_checkout_level'); in a custom plugin.
* BUG/ENHANCEMENT: Using the pmpro_confirmation_message filter on the confirmation page whether there is an invoice or not. Now also adding the the_content filters to the confirmation message. You can disable this by using remove_filter('pmpro_confirmation_message', 'pmpro_pmpro_confirmation_message'); in a custom plugin.
* ENHANCEMENT: Now tracking IPN event ids in order notes for recurring orders.
* ENHANCEMENT: Added pmpro_subscription_ipn_event_processed hook to IPN handler.
* ENHANCEMENT: Added pmpro_set_message filter to edit PMPro error messages. Passes the message and type.
* ENHANCEMENT: Now listing categories in hierarchical format in the Content Settings section of Membership Levels.
* ENHANCEMENT: Added pmpro_areLevelsFree() function to check if all levels in an array of levels are free.
* ENHANCEMENT: Added pmpro_getLevelsCost() - with an s - function to get the combined cost of multiple levels in an array.
* ENHANCEMENT: Added pmpro_getLevelsExpiration() - with an s - function to get the combined expiration text for multiple levels in array.
* ENHANCEMENT: Created the pmpro_getLevelAtCheckout function that modularizes some of the logic of creating the pmpro_level global at checkout.
* ENHANCEMENT: Added pmpro_members_list_user filter used on the admin members list and members list CSV export.
* ENHANCEMENT: Added a 4th parameter $cancel_level to pmpro_changeMembershipLevel(). If set, that level will definitely be cancelled locally and at the gateway. This parameter is also passed to the pmpro_before_change_membership_level and pmpro_after_change_membership_level hook.
* ENHANCEMENT: Added a new function pmpro_cancelMembershipLevel($level_id, $user_id, $old_level_status) that acts as a wrapper to pass the $cancel_level param to pmpro_changeMembershipLevel().
* ENHANCEMENT: Updated the cancel page on the frontend to support the Multiple Memberships per User addon. All memberships are shown. You can cancel individual memberships separately. The language of the confirm button mentions memberships vs account.
* ENHANCEMENT: Added pmpro_getMemberOrdersByCheckoutID($checkout_id) function to support Multiple Memberships per User and others using the checkout_id.
* ENHANCEMENT: Added a refund($order, $transaction_id) method to the PMPro_stripe class. This will be used by the Multiple Memberships per User addon and eventually used in other areas by the core pluginn.
